(this["webpackJsonpflood-game"]=this["webpackJsonpflood-game"]||[]).push([[0],{44:function(t,e){},76:function(t,e,n){},78:function(t,e,n){},79:function(t,e,n){},80:function(t,e,n){},82:function(t,e,n){},83:function(t,e,n){"use strict";n.r(e);var r,a=n(14),o=n(10),c=n(16),l=n(12),s=n(27),i=n.n(s),u="RESET",b=function(t){return t.type===u},d="START_GAME",j=function(t){return t.type===d},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now().toString();return{type:d,data:{seed:t}}},m="FLOOD",v=function(t){return t.type===m},f=function(t){return{type:m,data:{color:t}}},O="UNDO_MOVE",p=function(t){return t.type===O},x=n(32);!function(t){t[t.RED=0]="RED",t[t.ORANGE=1]="ORANGE",t[t.YELLOW=2]="YELLOW",t[t.GREEN=3]="GREEN",t[t.BLUE=4]="BLUE",t[t.PURPLE=5]="PURPLE"}(r||(r={}));var g=[r.RED,r.ORANGE,r.YELLOW,r.GREEN,r.BLUE,r.PURPLE],y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random,e=Math.floor(6*t()),n=g[e];return n},N=function(t){return t[0].length},E=function(t){return t.length},C=function(t,e,n){return t[n][e]},w=function(t,e,n,r){t[n][e]=r},k=function(t,e){for(var n=[],r=0;r<e;r++){for(var a=[],o=0;o<t;o++)a.push(0);n.push(a)}return n},G=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random,n=N(t),r=E(t),a=0;a<r;a++)for(var o=0;o<n;o++){var c=y(e);w(t,o,a,c)}},L=function(t){for(var e=N(t),n=E(t),r=C(t,0,0),a=0;a<n;a++)for(var o=0;o<e;o++){if(C(t,o,a)!==r)return!1}return!0},R=function(t,e){var n=function(t){for(var e=[],n=E(t),r=0;r<n;r++)e.push(Object(c.a)(t[r]));return e}(t),r=C(t,0,0);if(r===e)return n;var a=N(t),o=E(t),l=[[0,0]];for(w(n,0,0,e);l.length;){var s=l.shift(),i=Object(x.a)(s,2),u=i[0],b=i[1];if(u+1<a)C(n,u+1,b)===r&&(w(n,u+1,b,e),l.push([u+1,b]));if(b+1<o)C(n,u,b+1)===r&&(w(n,u,b+1,e),l.push([u,b+1]));if(u>0)C(n,u-1,b)===r&&(w(n,u-1,b,e),l.push([u-1,b]));if(b>0)C(n,u,b-1)===r&&(w(n,u,b-1,e),l.push([u,b-1]))}return n},B={seed:"",lastBoard:null,board:null,moves:[],isGameOver:!1,isGameWon:!1,currentColor:null},D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,e=arguments.length>1?arguments[1]:void 0;if(b(e))return B;if(j(e)){var n=e.data.seed,r=k(14,14);G(r,i()(n));var a=C(r,0,0);return{seed:n,board:r,currentColor:a,lastBoard:null,moves:[],isGameOver:!1,isGameWon:!1}}if(v(e)){var o=e.data.color,s=t.board,u=t.moves,d=t.isGameOver,h=t.isGameWon,m=t.currentColor;if(!s)return t;if(d)return t;if(m===o)return t;var f=R(s,o),O=u.length+1;return L(f)?(d=!0,h=!0,s=null):O>=25&&(d=!0),Object(l.a)(Object(l.a)({},t),{},{lastBoard:s,board:f,moves:O===u.length?u:[].concat(Object(c.a)(u),[o]),currentColor:o,isGameOver:d,isGameWon:h})}if(p(e)){var x=t.lastBoard,g=t.moves;return x?Object(l.a)(Object(l.a)({},t),{},{lastBoard:null,board:x,moves:g.slice(0,-1),currentColor:C(x,0,0)}):t}return t},M=function(t){return t.seed},T=function(t){return t.moves.length},U=function(t){return t.board},W=function(t){return t.isGameOver},P=function(t){return t.isGameWon},A=function(t){return null!==t.lastBoard},F=n(28),_=n(30),Y=n(5),S=n(0),I=n(31),J=n.n(I),q="yyyy-MM-dd",H=(n(76),n(1)),V=function(t){for(var e=t.board,n=t.onClick,r=35,a=N(e),o=E(e),c=a*r,l=o*r,s="0 0 ".concat(c," ").concat(l),i=[],u=Object(S.useCallback)((function(t){var r=Number(t.currentTarget.dataset.x),a=Number(t.currentTarget.dataset.y);n(C(e,r,a))}),[e,n]),b=0;b<o;b++)for(var d=0;d<a;d++){var j=Math.sqrt(Math.pow(d,2)+Math.pow(b,2));i.push(Object(H.jsx)("rect",{x:d*r-.5,y:b*r-.5,width:36,height:36,onClick:u,onTouchStart:u,style:{"--distance":j},"data-x":d,"data-y":b,"data-color":C(e,d,b)},d+","+b))}return Object(H.jsx)("div",{className:"Grid d-flex align-items-center",children:Object(H.jsx)("svg",{className:"Grid-svg",width:c,height:l,viewBox:s,preserveAspectRatio:"none",children:i})})},z=(n(78),function(){var t=Object(Y.b)(),e=Object(S.useCallback)((function(e){var n=parseInt(e.currentTarget.value,10);t(f(n))}),[t]);return Object(H.jsxs)("div",{className:"ColorButtons d-flex justify-content-between",children:[Object(H.jsx)("button",{className:"ColorButtons-button btn",type:"button",value:r.RED,onClick:e,title:"Flood with red",children:Object(H.jsx)("span",{className:"sr-only",children:"Red"})}),Object(H.jsx)("button",{className:"ColorButtons-button btn",type:"button",value:r.ORANGE,onClick:e,title:"Flood with orange",children:Object(H.jsx)("span",{className:"sr-only",children:"Orange"})}),Object(H.jsx)("button",{className:"ColorButtons-button btn",type:"button",value:r.YELLOW,onClick:e,title:"Flood with yellow",children:Object(H.jsx)("span",{className:"sr-only",children:"Yellow"})}),Object(H.jsx)("button",{className:"ColorButtons-button btn",type:"button",value:r.GREEN,onClick:e,title:"Flood with green",children:Object(H.jsx)("span",{className:"sr-only",children:"Green"})}),Object(H.jsx)("button",{className:"ColorButtons-button btn",type:"button",value:r.BLUE,onClick:e,title:"Flood with blue",children:Object(H.jsx)("span",{className:"sr-only",children:"Blue"})}),Object(H.jsx)("button",{className:"ColorButtons-button btn",type:"button",value:r.PURPLE,onClick:e,title:"Flood with purple",children:Object(H.jsx)("span",{className:"sr-only",children:"Purple"})})]})}),K=(n(79),function(){var t=Object(Y.b)(),e=Object(Y.c)(M),n=Object(Y.c)(U),r=Object(Y.c)(T),a=Object(Y.c)(W),o=Object(Y.c)(P),c=Object(Y.c)(A),l=Object(S.useCallback)((function(e){e.preventDefault(),t({type:O}),dataLayer.push({event:"undo_move"})}),[t]),s=Object(S.useCallback)((function(n){n.preventDefault(),t(h(e)),dataLayer.push({event:"restart_game"})}),[t,e]),i=Object(S.useCallback)((function(e){e.preventDefault(),t(h()),dataLayer.push({event:"new_game"})}),[t]),u=Object(S.useCallback)((function(e){e.preventDefault();var n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return J()(t,q)}();t(h(n)),dataLayer.push({event:"todays_game"})}),[t]),b=Object(S.useCallback)((function(e){t(f(e)),dataLayer.push({event:"game_move"})}),[t]);return n?Object(H.jsxs)("div",{className:"Game",children:[Object(H.jsxs)("nav",{className:"navbar navbar-light bg-light",children:[Object(H.jsx)("button",{className:"btn btn-dark mr-1",type:"button",onClick:i,children:"New game"}),Object(H.jsx)("button",{className:"btn btn-light mr-auto",type:"button",onClick:u,children:"Today's game"}),Object(H.jsx)("button",{className:"btn btn-light ml-1",type:"button",disabled:!c,onClick:l,children:"Undo move"}),Object(H.jsx)("button",{className:"btn btn-light ml-1",type:"button",onClick:s,children:"Restart"})]}),Object(H.jsx)("div",{className:"mt-4 mb-4",children:Object(H.jsx)(V,{board:n,onClick:b})}),Object(H.jsx)("div",{className:"mt-4 mb-4",children:Object(H.jsx)(z,{})}),Object(H.jsxs)("div",{className:"mt-4 mb-4 d-flex flex-column align-items-center",children:[Object(H.jsxs)("span",{className:"display-4",children:[r," / 25"]}),a&&Object(H.jsx)("strong",{className:"mr-3",children:"Game over"}),o&&Object(H.jsx)("strong",{className:"mr-3",children:"You win"})]})]}):null}),Q=(n(80),function(){return Object(H.jsxs)("div",{className:"App container pt-5 pb-5 mb-5",children:[Object(H.jsx)(K,{}),Object(H.jsxs)("div",{className:"mt-5 mb-5 text-center",children:[Object(H.jsx)("h2",{children:"How to play"}),Object(H.jsx)("p",{children:"Tap colors to flood-fill the board from the top left corner. The goal is to make the whole board a single color within 25 moves."})]})]})}),X=(n(81),n(82),Object(o.createStore)(D,Object(F.composeWithDevTools)(Object(o.applyMiddleware)(_.a))));X.dispatch(h()),Object(a.render)(Object(H.jsx)(Y.a,{store:X,children:Object(H.jsx)(Q,{})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.be89f7fe.chunk.js.map
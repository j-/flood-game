(this["webpackJsonpflood-game"]=this["webpackJsonpflood-game"]||[]).push([[0],{32:function(e,t){},39:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r,a=n(9),o=n(6),c=n(8),s=n(15),i=n.n(s),u="RESET",l=function(e){return e.type===u},d="START_GAME",b=function(e){return e.type===d},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now().toString();return{type:d,data:{seed:e}}},v="FLOOD",h=function(e){return e.type===v},j="UNDO_MOVE",m=function(e){return e.type===j},O=n(19),p=n(20);!function(e){e[e.RED=0]="RED",e[e.ORANGE=1]="ORANGE",e[e.YELLOW=2]="YELLOW",e[e.GREEN=3]="GREEN",e[e.BLUE=4]="BLUE",e[e.PURPLE=5]="PURPLE"}(r||(r={}));var g=[r.RED,r.ORANGE,r.YELLOW,r.GREEN,r.BLUE,r.PURPLE],x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random,t=Math.floor(6*e()),n=g[t];return n},E=function(e){return e[0].length},N=function(e){return e.length},y=function(e,t,n){return e[n][t]},G=function(e,t,n,r){e[n][t]=r},L=function(e,t){for(var n=[],r=0;r<t;r++){for(var a=[],o=0;o<e;o++)a.push(0);n.push(a)}return n},C=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random,n=E(e),r=N(e),a=0;a<r;a++)for(var o=0;o<n;o++){var c=x(t);G(e,o,a,c)}},R=function(e){for(var t=E(e),n=N(e),r=y(e,0,0),a=0;a<n;a++)for(var o=0;o<t;o++){if(y(e,o,a)!==r)return!1}return!0},k=function(e,t){var n=function(e){for(var t=[],n=N(e),r=0;r<n;r++)t.push(Object(p.a)(e[r]));return t}(e),r=y(e,0,0);if(r===t)return n;var a=E(e),o=N(e),c=[[0,0]];for(G(n,0,0,t);c.length;){var s=c.shift(),i=Object(O.a)(s,2),u=i[0],l=i[1];if(u+1<a)y(n,u+1,l)===r&&(G(n,u+1,l,t),c.push([u+1,l]));if(l+1<o)y(n,u,l+1)===r&&(G(n,u,l+1,t),c.push([u,l+1]));if(u>0)y(n,u-1,l)===r&&(G(n,u-1,l,t),c.push([u-1,l]));if(l>0)y(n,u,l-1)===r&&(G(n,u,l-1,t),c.push([u,l-1]))}return n},w={seed:"",lastBoard:null,board:null,moves:0,isGameOver:!1,isGameWon:!1,currentColor:null},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;if(l(t))return w;if(b(t)){var n=t.data.seed,r=L(14,14);C(r,i()(n));var a=y(r,0,0);return{seed:n,board:r,currentColor:a,lastBoard:null,moves:0,isGameOver:!1,isGameWon:!1}}if(h(t)){var o=t.data.color,s=e.board,u=e.moves,d=e.isGameOver,f=e.isGameWon,v=e.currentColor;if(!s)return e;if(d)return e;if(v===o)return e;var j=k(s,o),O=u+1;return R(j)?(d=!0,f=!0,s=null):O>=25&&(d=!0),Object(c.a)(Object(c.a)({},e),{},{lastBoard:s,board:j,moves:O,currentColor:o,isGameOver:d,isGameWon:f})}if(m(t)){var p=e.lastBoard,g=e.moves;return p?Object(c.a)(Object(c.a)({},e),{},{lastBoard:null,board:p,moves:g-1,currentColor:y(p,0,0)}):e}return e},D=function(e){return e.seed},M=function(e){return e.moves},T=function(e){return e.board},W=function(e){return e.isGameOver},U=function(e){return e.isGameWon},A=function(e){return null!==e.lastBoard},P=n(16),_=n(18),S=n(3),Y=n(0),J=(n(39),n(1)),q=function(e){for(var t=e.board,n=e.onClick,r=35,a=E(t),o=N(t),c=a*r,s=o*r,i="0 0 ".concat(c," ").concat(s),u=[],l=Object(Y.useCallback)((function(e){var r=Number(e.currentTarget.dataset.x),a=Number(e.currentTarget.dataset.y);n(y(t,r,a))}),[t,n]),d=0;d<o;d++)for(var b=0;b<a;b++){var f=Math.sqrt(Math.pow(b,2)+Math.pow(d,2));u.push(Object(J.jsx)("rect",{x:b*r-.5,y:d*r-.5,width:36,height:36,onClick:l,onTouchStart:l,style:{"--distance":f},"data-x":b,"data-y":d,"data-color":y(t,b,d)},b+","+d))}return Object(J.jsx)("div",{className:"Grid d-flex align-items-center",children:Object(J.jsx)("svg",{className:"Grid-svg",width:c,height:s,viewBox:i,preserveAspectRatio:"none",children:u})})},F=(n(41),function(){var e=Object(S.b)(),t=Object(S.c)(D),n=Object(S.c)(T),r=Object(S.c)(M),a=Object(S.c)(W),o=Object(S.c)(U),c=Object(S.c)(A),s=Object(Y.useCallback)((function(t){t.preventDefault(),e({type:j}),dataLayer.push({event:"undo_move"})}),[e]),i=Object(Y.useCallback)((function(n){n.preventDefault(),e(f(t)),dataLayer.push({event:"restart_game"})}),[e,t]),u=Object(Y.useCallback)((function(t){t.preventDefault(),e(f()),dataLayer.push({event:"new_game"})}),[e]),l=Object(Y.useCallback)((function(t){e(function(e){return{type:v,data:{color:e}}}(t)),dataLayer.push({event:"game_move"})}),[e]);return n?Object(J.jsxs)("div",{className:"Game",children:[Object(J.jsxs)("nav",{className:"navbar navbar-light bg-light",children:[Object(J.jsx)("button",{className:"btn btn-dark mr-auto",type:"button",onClick:u,children:"New game"}),Object(J.jsx)("button",{className:"btn btn-light ml-1",type:"button",disabled:!c,onClick:s,children:"Undo move"}),Object(J.jsx)("button",{className:"btn btn-light ml-1",type:"button",onClick:i,children:"Restart"})]}),Object(J.jsx)("div",{className:"mt-4 mb-4",children:Object(J.jsx)(q,{board:n,onClick:l})}),Object(J.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(J.jsxs)("span",{className:"display-4",children:[r," / 25"]}),a&&Object(J.jsx)("strong",{className:"mr-3",children:"Game over"}),o&&Object(J.jsx)("strong",{className:"mr-3",children:"You win"})]})]}):null}),H=(n(42),function(){return Object(J.jsxs)("div",{className:"App container pt-5 pb-5",children:[Object(J.jsx)(F,{}),Object(J.jsxs)("div",{className:"mt-5 text-center",children:[Object(J.jsx)("h2",{children:"How to play"}),Object(J.jsx)("p",{children:"Tap colors to flood-fill the board from the top left corner. The goal is to make the whole board a single color within 25 moves."})]})]})}),I=(n(43),n(44),Object(o.createStore)(B,Object(P.composeWithDevTools)(Object(o.applyMiddleware)(_.a))));I.dispatch(f()),Object(a.render)(Object(J.jsx)(S.a,{store:I,children:Object(J.jsx)(H,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.f81233f3.chunk.js.map
{"version":3,"sources":["types.ts","store/actions.ts","color.ts","board.ts","store/index.ts","components/Grid.tsx","components/Game.tsx","components/App.tsx","index.tsx"],"names":["Color","ACTION_RESET","isActionReset","action","type","ACTION_START_GAME","isActionStartGame","startGame","seed","Date","now","toString","data","ACTION_FLOOD","isActionFlood","ACTION_UNDO_MOVE","isActionUndoMove","COLOR_ARRAY","RED","ORANGE","YELLOW","GREEN","BLUE","PURPLE","getRandomColor","rng","Math","random","i","floor","color","getBoardWidth","board","length","getBoardHeight","getBoardColor","x","y","setBoardColor","buildBoard","width","height","row","push","randomiseBoard","isAllOneColor","target","flood","replacement","copy","copyBoard","queue","shift","DEFAULT_STATE","lastBoard","moves","isGameOver","isGameWon","currentColor","reducer","state","seedrandom","newBoard","newMoves","getSeed","getMoves","getBoard","canUndoLastMove","Grid","onClick","size","WIDTH","HEIGHT","VIEWBOX","children","handleClick","useCallback","e","Number","currentTarget","dataset","distance","sqrt","onTouchStart","style","data-x","data-y","data-color","className","viewBox","preserveAspectRatio","Game","dispatch","useDispatch","useSelector","gameOver","gameWon","enableUndo","handleClickUndo","preventDefault","handleClickReset","handleClickNewGame","handleClickColor","disabled","App","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunk","render","document","getElementById"],"mappings":"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","file":"static/js/main.094fd9cd.chunk.js","sourcesContent":["export enum Color {\n  RED,\n  ORANGE,\n  YELLOW,\n  GREEN,\n  BLUE,\n  PURPLE,\n}\n\nexport type Board = Color[][]\n","import { Action } from 'redux';\nimport { Color } from '../types';\n\n/* Reset action */\n\nexport const ACTION_RESET = 'RESET';\n\nexport interface ActionReset extends Action<typeof ACTION_RESET> { }\n\nexport const isActionReset = (action: Action): action is ActionReset => (\n  action.type === ACTION_RESET\n);\n\nexport const reset = (): ActionReset => ({\n  type: ACTION_RESET,\n});\n\n/* Start game action */\n\nexport const ACTION_START_GAME = 'START_GAME';\n\nexport interface ActionStartGame extends Action<typeof ACTION_START_GAME> {\n  data: {\n    seed: string;\n  };\n}\n\nexport const isActionStartGame = (action: Action): action is ActionStartGame => (\n  action.type === ACTION_START_GAME\n);\n\nexport const startGame = (seed = Date.now().toString()): ActionStartGame => ({\n  type: ACTION_START_GAME,\n  data: {\n    seed,\n  },\n});\n\n/* Flood action */\n\nexport const ACTION_FLOOD = 'FLOOD';\n\nexport interface ActionFlood extends Action<typeof ACTION_FLOOD> {\n  data: {\n    color: Color;\n  };\n}\n\nexport const isActionFlood = (action: Action): action is ActionFlood => (\n  action.type === ACTION_FLOOD\n);\n\nexport const flood = (color: Color): ActionFlood => ({\n  type: ACTION_FLOOD,\n  data: {\n    color,\n  },\n});\n\n/* Undo move action */\n\nexport const ACTION_UNDO_MOVE = 'UNDO_MOVE';\n\nexport interface ActionUndoMove extends Action<typeof ACTION_UNDO_MOVE> { }\n\nexport const isActionUndoMove = (action: Action): action is ActionUndoMove => (\n  action.type === ACTION_UNDO_MOVE\n);\n\nexport const undoMove = (): ActionUndoMove => ({\n  type: ACTION_UNDO_MOVE,\n});\n","import { Color } from './types';\n\nexport const COLOR_COUNT = 6;\n\nexport const COLOR_ARRAY = [\n  Color.RED,\n  Color.ORANGE,\n  Color.YELLOW,\n  Color.GREEN,\n  Color.BLUE,\n  Color.PURPLE,\n];\n\nexport const getRandomColor = (rng = Math.random): Color => {\n  const i = Math.floor(rng() * COLOR_COUNT);\n  const color = COLOR_ARRAY[i];\n  return color;\n};\n","import { Board, Color } from './types';\nimport { getRandomColor } from './color';\n\nexport const getBoardWidth = (board: Board): number => board[0].length;\nexport const getBoardHeight = (board: Board): number => board.length;\nexport const getBoardColor = (board: Board, x: number, y: number): Color => board[y][x];\nexport const setBoardColor = (board: Board, x: number, y: number, color: Color): void => { board[y][x] = color; };\n\nexport const buildBoard = (width: number, height: number): Board => {\n  const board = [];\n  for (let y = 0; y < height; y++) {\n    const row = [];\n    for (let x = 0; x < width; x++) {\n      row.push(0);\n    }\n    board.push(row);\n  }\n  return board;\n};\n\nexport const copyBoard = (board: Board): Board => {\n  const copy: Board = [];\n  const height = getBoardHeight(board);\n  for (let y = 0; y < height; y++) {\n    copy.push([...board[y]]);\n  }\n  return copy;\n};\n\nexport const randomiseBoard = (board: Board, rng = Math.random): void => {\n  const width = getBoardWidth(board);\n  const height = getBoardHeight(board);\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      const color = getRandomColor(rng);\n      setBoardColor(board, x, y, color);\n    }\n  }\n};\n\nexport const isAllOneColor = (board: Board): boolean => {\n  const width = getBoardWidth(board);\n  const height = getBoardHeight(board);\n  const target = getBoardColor(board, 0, 0);\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      const color = getBoardColor(board, x, y);\n      if (color !== target) return false;\n    }\n  }\n  return true;\n};\n\n/**\n@see https://en.wikipedia.org/wiki/Flood_fill#Alternative_implementations\n\nFlood-fill (node, target-color, replacement-color):\n  1. If target-color is equal to replacement-color, return.\n  2. If color of node is not equal to target-color, return.\n  3. Set the color of node to replacement-color.\n  4. Set Q to the empty queue.\n  5. Add node to the end of Q.\n  6. While Q is not empty:\n  7.     Set n equal to the first element of Q.\n  8.     Remove first element from Q.\n  9.     If the color of the node to the west of n is target-color,\n             set the color of that node to replacement-color and add that node to the end of Q.\n 10.     If the color of the node to the east of n is target-color,\n             set the color of that node to replacement-color and add that node to the end of Q.\n 11.     If the color of the node to the north of n is target-color,\n             set the color of that node to replacement-color and add that node to the end of Q.\n 12.     If the color of the node to the south of n is target-color,\n             set the color of that node to replacement-color and add that node to the end of Q.\n 13. Continue looping until Q is exhausted.\n 14. Return.\n*/\nexport const flood = (board: Board, replacement: Color): Board => {\n  const copy = copyBoard(board);\n  const target = getBoardColor(board, 0, 0);\n  if (target === replacement) return copy;\n  const width = getBoardWidth(board);\n  const height = getBoardHeight(board);\n  const queue = [[0, 0]];\n  setBoardColor(copy, 0, 0, replacement);\n  while (queue.length) {\n    const [x, y] = queue.shift() as [number, number];\n    // East\n    if (x + 1 < width) {\n      const color = getBoardColor(copy, x + 1, y);\n      if (color === target) {\n        setBoardColor(copy, x + 1, y, replacement);\n        queue.push([x + 1, y]);\n      }\n    }\n    // South\n    if (y + 1 < height) {\n      const color = getBoardColor(copy, x, y + 1);\n      if (color === target) {\n        setBoardColor(copy, x, y + 1, replacement);\n        queue.push([x, y + 1]);\n      }\n    }\n    // West\n    if (x > 0) {\n      const color = getBoardColor(copy, x - 1, y);\n      if (color === target) {\n        setBoardColor(copy, x - 1, y, replacement);\n        queue.push([x - 1, y]);\n      }\n    }\n    // North\n    if (y > 0) {\n      const color = getBoardColor(copy, x, y - 1);\n      if (color === target) {\n        setBoardColor(copy, x, y - 1, replacement);\n        queue.push([x, y - 1]);\n      }\n    }\n  }\n  return copy;\n};\n","import { Reducer } from 'redux';\nimport seedrandom from 'seedrandom';\nimport { isActionReset, isActionStartGame, isActionFlood, isActionUndoMove } from './actions';\nimport { Board, Color } from '../types';\nimport { buildBoard, randomiseBoard, getBoardColor, flood, isAllOneColor } from '../board';\n\nexport interface RootReducerState {\n  seed: string;\n  board: Board | null;\n  lastBoard: Board | null;\n  moves: number;\n  isGameOver: boolean;\n  isGameWon: boolean;\n  currentColor: Color | null;\n}\n\nexport const DEFAULT_STATE: RootReducerState = {\n  seed: '',\n  lastBoard: null,\n  board: null,\n  moves: 0,\n  isGameOver: false,\n  isGameWon: false,\n  currentColor: null,\n};\n\nexport const reducer: Reducer<RootReducerState> = (state = DEFAULT_STATE, action) => {\n  if (isActionReset(action)) {\n    return DEFAULT_STATE;\n  }\n\n  if (isActionStartGame(action)) {\n    const { seed } = action.data;\n    const board = buildBoard(14, 14);\n    randomiseBoard(board, seedrandom(seed));\n    const currentColor = getBoardColor(board, 0, 0);\n    return {\n      seed,\n      board,\n      currentColor,\n      lastBoard: null,\n      moves: 0,\n      isGameOver: false,\n      isGameWon: false,\n    };\n  }\n\n  if (isActionFlood(action)) {\n    const { color } = action.data;\n    let { board, moves, isGameOver, isGameWon, currentColor } = state;\n    // Game must have started\n    if (!board) return state;\n    // Game cannot be over\n    if (isGameOver) return state;\n    // Must choose a new color\n    if (currentColor === color) return state;\n    const newBoard = flood(board, color);\n    const newMoves = moves + 1;\n    if (isAllOneColor(newBoard)) {\n      isGameOver = true;\n      isGameWon = true;\n      board = null;\n    } else if (newMoves >= 25) {\n      isGameOver = true;\n    }\n    return {\n      ...state,\n      lastBoard: board,\n      board: newBoard,\n      moves: newMoves,\n      currentColor: color,\n      isGameOver,\n      isGameWon,\n    };\n  }\n\n  if (isActionUndoMove(action)) {\n    const { lastBoard, moves } = state;\n    if (!lastBoard) return state;\n    return {\n      ...state,\n      lastBoard: null,\n      board: lastBoard,\n      moves: moves - 1,\n      currentColor: getBoardColor(lastBoard, 0, 0),\n    };\n  }\n\n  return state;\n};\n\nexport default reducer;\n\nexport const getSeed = (state: RootReducerState) => state.seed;\nexport const getMoves = (state: RootReducerState) => state.moves;\nexport const getBoard = (state: RootReducerState) => state.board;\nexport const isGameOver = (state: RootReducerState) => state.isGameOver;\nexport const isGameWon = (state: RootReducerState) => state.isGameWon;\nexport const getCurrentColor = (state: RootReducerState) => state.currentColor;\nexport const canUndoLastMove = (state: RootReducerState) => state.lastBoard !== null;\n","import React, { useCallback } from 'react';\nimport { getBoardColor, getBoardHeight, getBoardWidth } from '../board';\nimport { Board, Color } from '../types';\nimport './Grid.css';\n\nexport interface Props {\n  board: Board;\n  onClick: (color: Color) => void;\n}\n\ninterface CustomCSSProperties extends React.CSSProperties {\n  '--distance': number;\n}\n\nconst SIZE = 35;\n\nconst Grid: React.FC<Props> = ({ board, onClick }) => {\n  const size = SIZE;\n  const width = getBoardWidth(board);\n  const height = getBoardHeight(board);\n  const WIDTH = width * size;\n  const HEIGHT = height * size;\n  const VIEWBOX = `0 0 ${WIDTH} ${HEIGHT}`;\n  const children: React.ReactChild[] = [];\n\n  const handleClick = useCallback<React.ReactEventHandler<SVGRectElement>>((e) => {\n    const x = Number(e.currentTarget.dataset.x);\n    const y = Number(e.currentTarget.dataset.y);\n    onClick(getBoardColor(board, x, y));\n  }, [board, onClick]);\n\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      const distance = Math.sqrt(x ** 2 + y ** 2);\n      children.push(\n        <rect\n          key={x + ',' + y}\n          x={x * size - 0.5}\n          y={y * size - 0.5}\n          width={size + 1}\n          height={size + 1}\n          onClick={handleClick}\n          onTouchStart={handleClick}\n          style={{ '--distance': distance } as CustomCSSProperties}\n          data-x={x}\n          data-y={y}\n          data-color={getBoardColor(board, x, y)}\n        />\n      );\n    }\n  }\n\n  return (\n    <div className=\"Grid d-flex align-items-center\">\n      <svg\n        className=\"Grid-svg\"\n        width={WIDTH}\n        height={HEIGHT}\n        viewBox={VIEWBOX}\n        preserveAspectRatio=\"none\"\n      >\n        {children}\n      </svg>\n    </div>\n  );\n};\n\nexport default Grid;\n","import React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Color } from '../types';\nimport { getSeed, getBoard, getMoves, isGameOver, isGameWon, canUndoLastMove } from '../store';\nimport { startGame, flood, undoMove } from '../store/actions';\nimport Grid from './Grid';\nimport './Game.css';\n\nconst Game: React.FC = () => {\n  const dispatch = useDispatch();\n  const seed = useSelector(getSeed);\n  const board = useSelector(getBoard);\n  const moves = useSelector(getMoves);\n  const gameOver = useSelector(isGameOver);\n  const gameWon = useSelector(isGameWon);\n  const enableUndo = useSelector(canUndoLastMove);\n\n  const handleClickUndo = useCallback<React.MouseEventHandler>((e) => {\n    e.preventDefault();\n    dispatch(undoMove());\n  }, [dispatch]);\n\n  const handleClickReset = useCallback<React.MouseEventHandler>((e) => {\n    e.preventDefault();\n    dispatch(startGame(seed));\n  }, [dispatch, seed]);\n\n  const handleClickNewGame = useCallback<React.MouseEventHandler>((e) => {\n    e.preventDefault();\n    dispatch(startGame());\n  }, [dispatch]);\n\n  const handleClickColor = useCallback((color: Color) => {\n    dispatch(flood(color));\n  }, [dispatch]);\n\n  if (!board) return null;\n\n  return (\n    <div className=\"Game\">\n      <nav className=\"navbar navbar-light bg-light\">\n        <button\n          className=\"btn btn-dark mr-auto\"\n          type=\"button\"\n          onClick={handleClickNewGame}\n        >\n          New game\n        </button>\n        <button\n          className=\"btn btn-light ml-1\"\n          type=\"button\"\n          disabled={!enableUndo}\n          onClick={handleClickUndo}\n        >\n          Undo move\n        </button>\n        <button\n          className=\"btn btn-light ml-1\"\n          type=\"button\"\n          onClick={handleClickReset}\n        >\n          Restart\n        </button>\n      </nav>\n      <div className=\"mt-4 mb-4\">\n        <Grid\n          board={board}\n          onClick={handleClickColor}\n        />\n      </div>\n      <div className=\"d-flex flex-column align-items-center\">\n        <span className=\"display-4\">{moves} / 25</span>\n        {gameOver && <strong className=\"mr-3\">Game over</strong>}\n        {gameWon && <strong className=\"mr-3\">You win</strong>}\n      </div>\n    </div>\n  );\n};\n\nexport default Game;\n","import React from 'react';\nimport Game from './Game';\nimport './App.css';\n\nconst App: React.FC = () => (\n  <div className=\"App container pt-5 pb-5\">\n    <Game />\n\n    <div className=\"mt-5 text-center\">\n      <h2>How to play</h2>\n      <p>Tap colors to flood-fill the board from the top left corner. The goal is to make the whole board a single color within 25 moves.</p>\n    </div>\n  </div>\n);\n\nexport default App;\n","import { render } from 'react-dom';\nimport { createStore, applyMiddleware } from 'redux';\nimport rootReducer from './store';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunk from 'redux-thunk';\nimport { Provider as StoreProvider } from 'react-redux';\nimport App from './components/App';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './styles.css';\nimport { startGame } from './store/actions';\n\nconst store = createStore(rootReducer, composeWithDevTools(\n  applyMiddleware(thunk),\n));\n\nstore.dispatch(startGame());\n\nrender(\n  <StoreProvider store={store}>\n    <App />\n  </StoreProvider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}
(this["webpackJsonpflood-game"]=this["webpackJsonpflood-game"]||[]).push([[0],{20:function(e,t,n){e.exports=n(44)},32:function(e,t){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n(7),c=n(5),u=n(12),l=n(14),i=n.n(l),s=function(e){return"RESET"===e.type},f=function(e){return"START_GAME"===e.type},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now().toString();return{type:"START_GAME",data:{seed:e}}},v=function(e){return"FLOOD"===e.type},E=function(e){return"UNDO_MOVE"===e.type},d=n(19),b=n(18);!function(e){e[e.RED=0]="RED",e[e.ORANGE=1]="ORANGE",e[e.YELLOW=2]="YELLOW",e[e.GREEN=3]="GREEN",e[e.BLUE=4]="BLUE",e[e.PURPLE=5]="PURPLE"}(r||(r={}));var h=[r.RED,r.ORANGE,r.YELLOW,r.GREEN,r.BLUE,r.PURPLE],p=new Map([[r.RED,"hsl(0, 80%, 60%)"],[r.ORANGE,"hsl(60, 80%, 60%)"],[r.YELLOW,"hsl(120, 80%, 60%)"],[r.GREEN,"hsl(180, 80%, 60%)"],[r.BLUE,"hsl(240, 80%, 60%)"],[r.PURPLE,"hsl(300, 80%, 60%)"]]),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random,t=Math.floor(6*e()),n=h[t];return n},g=function(e){var t=p.get(e);if(!t)throw new Error("Unrecognised color");return t},G=function(e){return e[0].length},N=function(e){return e.length},R=function(e,t,n){return e[n][t]},L=function(e,t,n,r){e[n][t]=r},j=function(e,t){for(var n=[],r=0;r<t;r++){for(var a=[],o=0;o<e;o++)a.push(0);n.push(a)}return n},y=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random,n=G(e),r=N(e),a=0;a<r;a++)for(var o=0;o<n;o++){var c=O(t);L(e,o,a,c)}},C=function(e){for(var t=G(e),n=N(e),r=R(e,0,0),a=0;a<n;a++)for(var o=0;o<t;o++){if(R(e,o,a)!==r)return!1}return!0},k=function(e,t){var n=function(e){for(var t=[],n=N(e),r=0;r<n;r++)t.push(Object(b.a)(e[r]));return t}(e),r=R(e,0,0);if(r===t)return n;var a=G(e),o=N(e),c=[[0,0]];for(L(n,0,0,t);c.length;){var u=c.shift(),l=Object(d.a)(u,2),i=l[0],s=l[1];if(i+1<a)R(n,i+1,s)===r&&(L(n,i+1,s,t),c.push([i+1,s]));if(s+1<o)R(n,i,s+1)===r&&(L(n,i,s+1,t),c.push([i,s+1]));if(i>0)R(n,i-1,s)===r&&(L(n,i-1,s,t),c.push([i-1,s]));if(s>0)R(n,i,s-1)===r&&(L(n,i,s-1,t),c.push([i,s-1]))}return n},D={seed:"",lastBoard:null,board:null,moves:0,isGameOver:!1,isGameWon:!1,currentColor:null},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;if(s(t))return D;if(f(t)){var n=t.data.seed,r=j(14,14);y(r,i()(n));var a=R(r,0,0);return{seed:n,board:r,currentColor:a,lastBoard:null,moves:0,isGameOver:!1,isGameWon:!1}}if(v(t)){var o=t.data.color,c=e.board,l=e.moves,m=e.isGameOver,d=e.isGameWon,b=e.currentColor;if(!c)return e;if(m)return e;if(b===o)return e;var h=k(c,o),p=l+1;return C(h)?(m=!0,d=!0,c=null):p>=25&&(m=!0),Object(u.a)({},e,{lastBoard:c,board:h,moves:p,currentColor:o,isGameOver:m,isGameWon:d})}if(E(t)){var O=e.lastBoard,g=e.moves;return O?Object(u.a)({},e,{lastBoard:null,board:O,moves:g-1,currentColor:R(O,0,0)}):e}return e},B=function(e){return e.seed},U=function(e){return e.moves},A=function(e){return e.board},W=function(e){return e.isGameOver},M=function(e){return e.isGameWon},P=function(e){return null!==e.lastBoard},S=n(15),T=n(17),x=n(2),Y=(n(39),function(e){for(var t=e.board,n=e.onClick,r=G(t),o=N(t),c=35*r,u=35*o,l="0 0 ".concat(c," ").concat(u),i=[],s=0;s<o;s++)for(var f=function(e){var r=R(t,e,s),o=g(r);i.push(a.createElement("rect",{key:e+","+s,x:35*e-.5,y:35*s-.5,width:36,height:36,fill:o,onClick:function(){return n(r)},onTouchStart:function(){return n(r)}}))},m=0;m<r;m++)f(m);return a.createElement("svg",{className:"GameSVG",width:c,height:u,viewBox:l,preserveAspectRatio:"none"},i)}),_=(n(40),function(){var e=Object(x.b)(),t=Object(x.c)(B),n=Object(x.c)(A),r=Object(x.c)(U),o=Object(x.c)(W),c=Object(x.c)(M),u=Object(x.c)(P),l=a.useCallback((function(t){t.preventDefault(),e({type:"UNDO_MOVE"})}),[e]),i=a.useCallback((function(n){n.preventDefault(),e(m(t))}),[e,t]),s=a.useCallback((function(t){t.preventDefault(),e(m())}),[e]),f=a.useCallback((function(t){e(function(e){return{type:"FLOOD",data:{color:e}}}(t))}),[e]);return n?a.createElement("div",{className:"Game"},a.createElement("nav",{className:"navbar navbar-light bg-light"},a.createElement("button",{className:"btn btn-dark mr-auto",type:"button",onClick:s},"New game"),a.createElement("button",{className:"btn btn-light ml-1",type:"button",disabled:!u,onClick:l},"Undo move"),a.createElement("button",{className:"btn btn-light ml-1",type:"button",onClick:i},"Restart")),a.createElement("div",{className:"d-flex align-items-center mt-4 mb-4"},a.createElement(Y,{board:n,onClick:f})),a.createElement("div",{className:"d-flex flex-column align-items-center"},a.createElement("span",{className:"display-4"},r," / 25"),o&&a.createElement("strong",{className:"mr-3"},"Game over"),c&&a.createElement("strong",{className:"mr-3"},"You win"))):null}),V=(n(41),function(){return a.createElement("div",{className:"App container pt-5 pb-5"},a.createElement(_,null))}),F=(n(42),n(43),Object(c.createStore)(w,Object(S.composeWithDevTools)(Object(c.applyMiddleware)(T.a))));F.dispatch(m()),Object(o.render)(a.createElement(x.a,{store:F},a.createElement(V,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.2e177ce7.chunk.js.map
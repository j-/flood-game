(this["webpackJsonpflood-game"]=this["webpackJsonpflood-game"]||[]).push([[0],{32:function(t,e){},39:function(t,e,n){},41:function(t,e,n){},42:function(t,e,n){},44:function(t,e,n){},45:function(t,e,n){"use strict";n.r(e);var r,a=n(9),o=n(6),c=n(8),i=n(15),s=n.n(i),l="RESET",u=function(t){return t.type===l},b="START_GAME",d=function(t){return t.type===b},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now().toString();return{type:b,data:{seed:t}}},j="FLOOD",h=function(t){return t.type===j},v="UNDO_MOVE",m=function(t){return t.type===v},O=n(19),p=n(20);!function(t){t[t.RED=0]="RED",t[t.ORANGE=1]="ORANGE",t[t.YELLOW=2]="YELLOW",t[t.GREEN=3]="GREEN",t[t.BLUE=4]="BLUE",t[t.PURPLE=5]="PURPLE"}(r||(r={}));var g=[r.RED,r.ORANGE,r.YELLOW,r.GREEN,r.BLUE,r.PURPLE],x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random,e=Math.floor(6*t()),n=g[e];return n},E=function(t){return t[0].length},N=function(t){return t.length},G=function(t,e,n){return t[n][e]},y=function(t,e,n,r){t[n][e]=r},C=function(t,e){for(var n=[],r=0;r<e;r++){for(var a=[],o=0;o<t;o++)a.push(0);n.push(a)}return n},R=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random,n=E(t),r=N(t),a=0;a<r;a++)for(var o=0;o<n;o++){var c=x(e);y(t,o,a,c)}},k=function(t){for(var e=E(t),n=N(t),r=G(t,0,0),a=0;a<n;a++)for(var o=0;o<e;o++){if(G(t,o,a)!==r)return!1}return!0},w=function(t,e){var n=function(t){for(var e=[],n=N(t),r=0;r<n;r++)e.push(Object(p.a)(t[r]));return e}(t),r=G(t,0,0);if(r===e)return n;var a=E(t),o=N(t),c=[[0,0]];for(y(n,0,0,e);c.length;){var i=c.shift(),s=Object(O.a)(i,2),l=s[0],u=s[1];if(l+1<a)G(n,l+1,u)===r&&(y(n,l+1,u,e),c.push([l+1,u]));if(u+1<o)G(n,l,u+1)===r&&(y(n,l,u+1,e),c.push([l,u+1]));if(l>0)G(n,l-1,u)===r&&(y(n,l-1,u,e),c.push([l-1,u]));if(u>0)G(n,l,u-1)===r&&(y(n,l,u-1,e),c.push([l,u-1]))}return n},L={seed:"",lastBoard:null,board:null,moves:0,isGameOver:!1,isGameWon:!1,currentColor:null},B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,e=arguments.length>1?arguments[1]:void 0;if(u(e))return L;if(d(e)){var n=e.data.seed,r=C(14,14);R(r,s()(n));var a=G(r,0,0);return{seed:n,board:r,currentColor:a,lastBoard:null,moves:0,isGameOver:!1,isGameWon:!1}}if(h(e)){var o=e.data.color,i=t.board,l=t.moves,b=t.isGameOver,f=t.isGameWon,j=t.currentColor;if(!i)return t;if(b)return t;if(j===o)return t;var v=w(i,o),O=l+1;return k(v)?(b=!0,f=!0,i=null):O>=25&&(b=!0),Object(c.a)(Object(c.a)({},t),{},{lastBoard:i,board:v,moves:O,currentColor:o,isGameOver:b,isGameWon:f})}if(m(e)){var p=t.lastBoard,g=t.moves;return p?Object(c.a)(Object(c.a)({},t),{},{lastBoard:null,board:p,moves:g-1,currentColor:G(p,0,0)}):t}return t},D=function(t){return t.seed},M=function(t){return t.moves},T=function(t){return t.board},W=function(t){return t.isGameOver},U=function(t){return t.isGameWon},A=function(t){return null!==t.lastBoard},P=n(16),S=n(18),Y=n(3),J=n(0),_=(n(39),n(1)),q=function(t){for(var e=t.board,n=t.onClick,r=35,a=E(e),o=N(e),c=a*r,i=o*r,s="0 0 ".concat(c," ").concat(i),l=[],u=Object(J.useCallback)((function(t){var r=Number(t.currentTarget.dataset.x),a=Number(t.currentTarget.dataset.y);n(G(e,r,a))}),[e,n]),b=0;b<o;b++)for(var d=0;d<a;d++){var f=Math.sqrt(Math.pow(d,2)+Math.pow(b,2));l.push(Object(_.jsx)("rect",{x:d*r-.5,y:b*r-.5,width:36,height:36,onClick:u,onTouchStart:u,style:{"--distance":f},"data-x":d,"data-y":b,"data-color":G(e,d,b)},d+","+b))}return Object(_.jsx)("div",{className:"Grid d-flex align-items-center",children:Object(_.jsx)("svg",{className:"Grid-svg",width:c,height:i,viewBox:s,preserveAspectRatio:"none",children:l})})},F=(n(41),function(){var t=Object(Y.b)(),e=Object(Y.c)(D),n=Object(Y.c)(T),r=Object(Y.c)(M),a=Object(Y.c)(W),o=Object(Y.c)(U),c=Object(Y.c)(A),i=Object(J.useCallback)((function(e){e.preventDefault(),t({type:v})}),[t]),s=Object(J.useCallback)((function(n){n.preventDefault(),t(f(e))}),[t,e]),l=Object(J.useCallback)((function(e){e.preventDefault(),t(f())}),[t]),u=Object(J.useCallback)((function(e){t(function(t){return{type:j,data:{color:t}}}(e))}),[t]);return n?Object(_.jsxs)("div",{className:"Game",children:[Object(_.jsxs)("nav",{className:"navbar navbar-light bg-light",children:[Object(_.jsx)("button",{className:"btn btn-dark mr-auto",type:"button",onClick:l,children:"New game"}),Object(_.jsx)("button",{className:"btn btn-light ml-1",type:"button",disabled:!c,onClick:i,children:"Undo move"}),Object(_.jsx)("button",{className:"btn btn-light ml-1",type:"button",onClick:s,children:"Restart"})]}),Object(_.jsx)("div",{className:"mt-4 mb-4",children:Object(_.jsx)(q,{board:n,onClick:u})}),Object(_.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(_.jsxs)("span",{className:"display-4",children:[r," / 25"]}),a&&Object(_.jsx)("strong",{className:"mr-3",children:"Game over"}),o&&Object(_.jsx)("strong",{className:"mr-3",children:"You win"})]})]}):null}),H=(n(42),function(){return Object(_.jsxs)("div",{className:"App container pt-5 pb-5",children:[Object(_.jsx)(F,{}),Object(_.jsxs)("div",{className:"mt-5 text-center",children:[Object(_.jsx)("h2",{children:"How to play"}),Object(_.jsx)("p",{children:"Tap colors to flood-fill the board from the top left corner. The goal is to make the whole board a single color within 25 moves."})]})]})}),I=(n(43),n(44),Object(o.createStore)(B,Object(P.composeWithDevTools)(Object(o.applyMiddleware)(S.a))));I.dispatch(f()),Object(a.render)(Object(_.jsx)(Y.a,{store:I,children:Object(_.jsx)(H,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.094fd9cd.chunk.js.map
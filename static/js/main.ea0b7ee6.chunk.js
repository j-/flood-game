(this["webpackJsonpflood-game"]=this["webpackJsonpflood-game"]||[]).push([[0],{20:function(e,t,n){e.exports=n(44)},32:function(e,t){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n(7),c=n(5),u=n(13),i=n(15),l=n.n(i),s=function(e){return"RESET"===e.type},f=function(e){return"START_GAME"===e.type},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now().toString();return{type:"START_GAME",data:{seed:e}}},v=function(e){return"FLOOD"===e.type},d=function(e){return"UNDO_MOVE"===e.type},h=n(9),E=n(19);!function(e){e[e.RED=0]="RED",e[e.ORANGE=1]="ORANGE",e[e.YELLOW=2]="YELLOW",e[e.GREEN=3]="GREEN",e[e.BLUE=4]="BLUE",e[e.PURPLE=5]="PURPLE"}(r||(r={}));var b=[r.RED,r.ORANGE,r.YELLOW,r.GREEN,r.BLUE,r.PURPLE],p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random,t=Math.floor(6*e()),n=b[t];return n},O=function(e){return e[0].length},g=function(e){return e.length},N=function(e,t,n){return e[n][t]},G=function(e,t,n,r){e[n][t]=r},R=function(e,t){for(var n=[],r=0;r<t;r++){for(var a=[],o=0;o<e;o++)a.push(0);n.push(a)}return n},w=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random,n=O(e),r=g(e),a=0;a<r;a++)for(var o=0;o<n;o++){var c=p(t);G(e,o,a,c)}},y=function(e){for(var t=O(e),n=g(e),r=N(e,0,0),a=0;a<n;a++)for(var o=0;o<t;o++){if(N(e,o,a)!==r)return!1}return!0},k=function(e,t){var n=function(e){for(var t=[],n=g(e),r=0;r<n;r++)t.push(Object(E.a)(e[r]));return t}(e),r=N(e,0,0);if(r===t)return n;var a=O(e),o=g(e),c=[[0,0]];for(G(n,0,0,t);c.length;){var u=c.shift(),i=Object(h.a)(u,2),l=i[0],s=i[1];if(l+1<a)N(n,l+1,s)===r&&(G(n,l+1,s,t),c.push([l+1,s]));if(s+1<o)N(n,l,s+1)===r&&(G(n,l,s+1,t),c.push([l,s+1]));if(l>0)N(n,l-1,s)===r&&(G(n,l-1,s,t),c.push([l-1,s]));if(s>0)N(n,l,s-1)===r&&(G(n,l,s-1,t),c.push([l,s-1]))}return n},C={seed:"",lastBoard:null,board:null,moves:0,isGameOver:!1,isGameWon:!1,currentColor:null},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;if(s(t))return C;if(f(t)){var n=t.data.seed,r=R(14,14);w(r,l()(n));var a=N(r,0,0);return{seed:n,board:r,currentColor:a,lastBoard:null,moves:0,isGameOver:!1,isGameWon:!1}}if(v(t)){var o=t.data.color,c=e.board,i=e.moves,m=e.isGameOver,h=e.isGameWon,E=e.currentColor;if(!c)return e;if(m)return e;if(E===o)return e;var b=k(c,o),p=i+1;return y(b)?(m=!0,h=!0,c=null):p>=25&&(m=!0),Object(u.a)({},e,{lastBoard:c,board:b,moves:p,currentColor:o,isGameOver:m,isGameWon:h})}if(d(t)){var O=e.lastBoard,g=e.moves;return O?Object(u.a)({},e,{lastBoard:null,board:O,moves:g-1,currentColor:N(O,0,0)}):e}return e},j=function(e){return e.seed},A=function(e){return e.moves},L=function(e){return e.board},D=function(e){return e.isGameOver},B=function(e){return e.isGameWon},S=function(e){return null!==e.lastBoard},T=n(16),U=n(18),W=n(2),x=function(e,t){var n=function(e){var t=a.useRef();return a.useEffect((function(){t.current=e}),[e]),t.current}(e),r=function(e){var t=a.useState([]),n=Object(h.a)(t,2),r=n[0],o=n[1];return a.useEffect((function(){if(e.current){var t=e.current.querySelectorAll("rect");o(Array.from(t))}}),[e]),r}(t);a.useEffect((function(){if(r.length){var t=O(e),a=g(e),o=Math.sqrt(Math.pow(t,2)+Math.pow(a,2)),c=t*a,u=null,i=requestAnimationFrame((function a(l){null===u&&(u=l);for(var s=l-u,f=0,m=0;m<c;m++){var v=r[m],d=m%t,h=Math.floor(m/t),E=N(e,d,h);if(n){var b=N(n,d,h);if(E!==b){var p=Math.sqrt(Math.pow(d,2)+Math.pow(h,2))/o;f=Math.min(Math.max(s-500*p,0)/500,1),v.dataset.color=(f>0?E:b).toString()}else v.dataset.color=E.toString()}else v.dataset.color=E.toString()}f<1&&(i=requestAnimationFrame(a))}));return function(){return cancelAnimationFrame(i)}}}),[r,e,n])},P=a.forwardRef((function(e,t){for(var n=e.size,r=void 0===n?35:n,o=e.width,c=e.height,u=e.onClick,i=o*r,l=c*r,s="0 0 ".concat(i," ").concat(l),f=[],m=function(e){for(var t=function(t){f.push(a.createElement("rect",{key:t+","+e,id:t+","+e,x:t*r-.5,y:e*r-.5,width:r+1,height:r+1,onClick:function(){return u(t,e)},onTouchStart:function(){return u(t,e)}}))},n=0;n<o;n++)t(n)},v=0;v<c;v++)m(v);return a.createElement("svg",{ref:t,width:i,height:l,viewBox:s,preserveAspectRatio:"none"},f)})),q=(n(39),function(e){var t=e.board,n=e.onClick,r=a.useRef(null),o=O(t),c=g(t);return x(t,r),a.createElement("div",{className:"Grid d-flex align-items-center"},a.createElement(P,{ref:r,width:o,height:c,onClick:function(e,r){n(N(t,e,r))}}))}),F=(n(40),function(){var e=Object(W.b)(),t=Object(W.c)(j),n=Object(W.c)(L),r=Object(W.c)(A),o=Object(W.c)(D),c=Object(W.c)(B),u=Object(W.c)(S),i=a.useCallback((function(t){t.preventDefault(),e({type:"UNDO_MOVE"})}),[e]),l=a.useCallback((function(n){n.preventDefault(),e(m(t))}),[e,t]),s=a.useCallback((function(t){t.preventDefault(),e(m())}),[e]),f=a.useCallback((function(t){e(function(e){return{type:"FLOOD",data:{color:e}}}(t))}),[e]);return n?a.createElement("div",{className:"Game"},a.createElement("nav",{className:"navbar navbar-light bg-light"},a.createElement("button",{className:"btn btn-dark mr-auto",type:"button",onClick:s},"New game"),a.createElement("button",{className:"btn btn-light ml-1",type:"button",disabled:!u,onClick:i},"Undo move"),a.createElement("button",{className:"btn btn-light ml-1",type:"button",onClick:l},"Restart")),a.createElement("div",{className:"mt-4 mb-4"},a.createElement(q,{board:n,onClick:f})),a.createElement("div",{className:"d-flex flex-column align-items-center"},a.createElement("span",{className:"display-4"},r," / 25"),o&&a.createElement("strong",{className:"mr-3"},"Game over"),c&&a.createElement("strong",{className:"mr-3"},"You win"))):null}),Y=(n(41),function(){return a.createElement("div",{className:"App container pt-5 pb-5"},a.createElement(F,null),a.createElement("div",{className:"mt-5 text-center"},a.createElement("h2",null,"How to play"),a.createElement("p",null,"Tap colors to flood-fill the board from the top left corner. The goal is to make the whole board a single color within 25 moves.")))}),_=(n(42),n(43),Object(c.createStore)(M,Object(T.composeWithDevTools)(Object(c.applyMiddleware)(U.a))));_.dispatch(m()),Object(o.render)(a.createElement(W.a,{store:_},a.createElement(Y,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.ea0b7ee6.chunk.js.map